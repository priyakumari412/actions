name: "github actions"

on: 
  push: 
    branches: ["main"]
  
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
     - name: "get code"
       uses: actions/checkout@v3
     - name: "setup node"
       uses: actions/setup-node@v3

     - name: "install modules"
       run: npm install

     - name: "tests"
       run: npm run test

     - name: "msg"
       run: echo "test successfull!"

  build:
    needs: test
    runs-on: ubuntu-latest

    steps:
     - name: "get code"
       uses: actions/checkout@v3
     - name: "setup node"
       uses: actions/setup-node@v3

     - name: "install modules"
       run: npm install

     - name: "build"
       run: npm run build

     - name: "msg"
       run: echo "build successfull!"

     - name: "upload dist"
       uses: actions/upload-artifact@v4
       with:
        path: dist

  deploy: 
    needs: build
    runs-on: ubuntu-latest

    steps:
     - name: "download dist"
       uses: actions/download-artifact@v4

